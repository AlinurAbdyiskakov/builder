define.alias("@glimmer/component/-private/ember-component-manager","msg-rich-media/component-managers/glimmer")
define("msg-rich-media/components/attachment-display",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","msg-shared/utils/file-meta","@glimmer/component","msg-shared/utils/constants","global-utils/utils/file-size-formatter","global-utils/utils/is-browser"],function(e,t,a,i,n,s,r,l,o,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var d,c,p,u,g,h,b,f,y,v,_,w,E,D,x,k,S,T,P,M,O
const C=Ember.HTMLBars.template({id:"0zOk9Ute",block:'{"symbols":["modal","@enableMsgFwd","@attachment","@deleteMessageEventModalState","@event","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@shouldShowEditDelete","@showSendReactionControls","@reactionsHoverTrackingName"],"statements":[[8,"msg-ui@primitives/event-listitem-actions",[],[["@classNames","@attachment","@enableMsgFwd","@deleteMessageEventModalState","@event","@filename","@isImage","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@setMessageFocus","@shouldShowEditDelete","@showMessageEditForm","@showSendReactionControls","@reactionsHoverTrackingName"],[[31,["\\n    msg-s-event-listitem__attachment-item\\n    ",[30,[36,2],[[32,0,["scanInProgress"]],"msg-s-event-listitem__attachment-item--is-scanning"],null],"\\n    ",[30,[36,2],[[32,0,["downloaded"]],"msg-s-event-listitem__attachment-item--downloaded"],null],"\\n    ",[30,[36,2],[[32,2],"msg-s-event-listitem__attachment-item--msg-fwd-enabled"],null],"\\n    ",[30,[36,2],[[32,0,["messageFocused"]],"msg-s-event-listitem__message-bubble--is-focused"],null],"\\n  "]],[32,3],[32,2],[32,4],[32,5],[32,0,["filename"]],[32,0,["isImage"]],[32,6],[32,7],[32,8],[32,9],[32,10],[30,[36,5],[[32,0],"messageFocused"],null],[32,11],false,[32,12],[32,13]]],[["default"],[{"statements":[[2,"\\n"],[6,[37,2],[[32,0,["isImage"]]],null,[["default","else"],[{"statements":[[2,"    "],[10,"div"],[14,0,"msg-s-event-listitem__image-container"],[12],[2,"\\n      "],[11,"button"],[24,0,"full-height full-width"],[24,4,"button"],[4,[38,3],["click",[30,[36,5],[[32,0],"previewModalIsOpen",true],null]],null],[4,[38,4],["photo_viewer"],null],[12],[2,"\\n        "],[10,"span"],[14,0,"visually-hidden"],[12],[2,"\\n          "],[1,[30,[36,0],["i18n_file_preview","msg-rich-media/components/attachment-display"],[["filename"],[[32,0,["filename"]]]]]],[2,"\\n        "],[13],[2,"\\n"],[2,"        "],[8,"ember-vector-images@custom-image",[],[["@image","@class","@alt","@ghostType","@desiredWidth"],[[30,[36,6],[[32,0,["downloadUrl"]]],null],"msg-s-event-listitem__image block",[32,0,["filename"]],"image",1000]],null],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"    "],[11,"a"],[16,6,[30,[36,2],[[32,0,["scanPassed"]],[32,0,["downloadUrl"]]],null]],[24,0,"msg-s-event-listitem__download-attachment t-14 t-black--light t-normal"],[16,"download",[32,0,["filename"]]],[24,"target","_blank"],[24,"rel","noopener noreferrer"],[4,[38,3],["click",[32,0,["attemptToDownload"]]],null],[4,[38,4],["view_attachment"],null],[12],[2,"\\n      "],[10,"span"],[14,0,"visually-hidden"],[12],[2,"\\n        "],[1,[30,[36,0],["i18n_download","msg-rich-media/components/attachment-display"],[["filename"],[[32,0,["filename"]]]]]],[2,"\\n      "],[13],[2,"\\n      "],[10,"div"],[15,0,[31,["msg-s-event-listitem__attachment-type msg-s-event-listitem__attachment-type--",[32,0,["mediaTypeExtension"]]," display-flex m0"]]],[12],[2,"\\n"],[6,[37,2],[[32,0,["showPrompt"]]],null,[["default","else"],[{"statements":[[2,"          "],[10,"div"],[14,0,"msg-s-event-listitem__attachment-prompt text-align-center t-14 t-black t-bold"],[12],[2,"\\n"],[6,[37,2],[[32,0,["showFailure"]]],null,[["default","else"],[{"statements":[[2,"              "],[10,"span"],[14,0,"msg-s-event-listitem__attachment-error"],[12],[2,"\\n                "],[1,[30,[36,1],null,[["animate","type","class"],[true,"yield-pebble-icon","flex-shrink-zero mr1"]]]],[2,"\\n                "],[1,[30,[36,2],[[32,0,["scanFailed"]],[30,[36,0],["i18n_virus_detected","msg-rich-media/components/attachment-display"],null],[30,[36,0],["i18n_scan_failed","msg-rich-media/components/attachment-display"],null]],null]],[2,"\\n              "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"              "],[1,[30,[36,0],["i18n_download_attachment","msg-rich-media/components/attachment-display"],null]],[2,"\\n"]],"parameters":[]}]]],[2,"          "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"          "],[10,"div"],[14,0,"flex-grow-1 truncate"],[12],[2,"\\n            "],[10,"h3"],[14,0,"attachment-filename"],[12],[2,"\\n              "],[1,[32,0,["filename"]]],[2,"\\n            "],[13],[2,"\\n            "],[10,"p"],[14,0,"attachment-filesize flex-shrink-zero"],[12],[2,"\\n              "],[1,[32,0,["formattedSize"]]],[2,"\\n            "],[13],[2,"\\n          "],[13],[2,"\\n          "],[10,"div"],[14,0,"display-flex align-items-center justify-center flex-shrink-zero"],[12],[2,"\\n            "],[10,"button"],[14,0,"msg-s-event-listitem__attachment-hover display-flex align-items-center justify-center"],[14,4,"button"],[12],[2,"\\n"],[6,[37,2],[[32,0,["scanInProgress"]]],null,[["default","else"],[{"statements":[[2,"                "],[10,"p"],[14,0,"t-14 t-black--light t-bold"],[12],[2,"\\n                  "],[1,[30,[36,0],["i18n_scanning","msg-rich-media/components/attachment-display"],null]],[2,"\\n                "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"                "],[1,[30,[36,1],null,[["type","size","a11y-text"],["download-icon","small",[30,[36,0],["i18n_download_attachment","msg-rich-media/components/attachment-display"],null]]]]],[2,"\\n                "],[10,"p"],[14,0,"t-14 t-black--light t-bold"],[12],[2,"\\n                  "],[1,[30,[36,0],["i18n_download_attachment","msg-rich-media/components/attachment-display"],null]],[2,"\\n                "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"            "],[13],[2,"\\n          "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"      "],[13],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"\\n  "],[8,"artdeco-modal@artdeco-modal",[],[["@dismissModal","@isOpen","@modalClasses","@overlayClasses"],[[32,0,["dismissModal"]],[32,0,["previewModalIsOpen"]],"msg-modal-preview","display-flex flex-column justify-center"]],[["default"],[{"statements":[[2,"\\n    "],[8,[32,1,["artdeco-modal-header"]],[],[["@classNames"],["visually-hidden"]],[["default"],[{"statements":[[2,"\\n      "],[10,"h3"],[14,1,"msg-modal-preview__label"],[14,0,"t-18 t-white--light t-bold"],[12],[2,"\\n        "],[1,[32,3,["displayName"]]],[2,"\\n      "],[13],[2,"\\n    "]],"parameters":[]}]]],[2,"\\n\\n    "],[8,[32,1,["artdeco-modal-content"]],[],[["@classNames"],["msg-modal-preview__content"]],[["default"],[{"statements":[[2,"\\n      "],[8,"ember-vector-images@custom-image",[],[["@alt","@classNames","@ghostType","@image","@desiredWidth"],[[30,[36,0],["i18n_img_alt","msg-rich-media/components/attachment-display"],[["filename"],[[32,0,["filename"]]]]],"msg-modal-preview__image","image",[32,0,["downloadUrl"]],10000]],null],[2,"\\n    "]],"parameters":[]}]]],[2,"\\n  "]],"parameters":[1]}]]],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["t","artdeco-icons-web@li-icon","if","on","ember-cli-pemberly-tracking@track-interaction","ember-set-helper@set","unbound"]}',meta:{moduleName:"msg-rich-media/components/attachment-display.hbs"}}),{ATTACHMENT_SCAN_STATUS:{VIRUS_DETECTED:z,VIRUS_NOT_DETECTED:j,SCANNING:L,ERROR:I}}=l.default
let F=(d=Ember.inject.service("jet"),c=Ember.inject.service("i18n"),p=Ember.inject.service("tracking"),u=Ember.inject.service("msg-data@data-manager"),g=Ember._tracked,h=Ember._tracked,b=Ember._tracked,f=Ember._tracked,y=Ember._tracked,v=Ember._action,_=Ember._action,w=class extends r.default{constructor(){super(...arguments);(0,t.default)(this,"jet",E,this);(0,t.default)(this,"i18n",D,this);(0,t.default)(this,"tracking",x,this);(0,t.default)(this,"msgDataManager",k,this);(0,t.default)(this,"scanCount",S,this);(0,t.default)(this,"scanStatus",T,this);(0,t.default)(this,"showDownload",P,this);(0,t.default)(this,"downloaded",M,this);(0,t.default)(this,"previewModalIsOpen",O,this);(0,a.default)(this,"scanLog",void 0)}get scanFailed(){return this.scanStatus===z}get scanPassed(){return this.scanStatus===j}get scanInProgress(){return this.scanStatus===L}get scanError(){return this.scanStatus===I}get showFailure(){return this.scanFailed||this.scanError}get showPrompt(){return this.showDownload||this.showFailure}get downloadUrl(){return Ember.get(this.args,"attachment.reference")}get attachmentId(){return Ember.get(this.args,"attachment.id")}get isImage(){const e=Ember.get(this.args,"attachment.mediaType"),t=Ember.get(this.args,"attachment.name")
return(0,s.isSupportedImageFile)(e,t)}get filename(){return jSecure.htmlUnencode(Ember.get(this.args,"attachment.name"))}get mediaTypeExtension(){return(0,s.mediaTypeExtension)(Ember.get(this.args,"attachment.mediaType"))}get formattedSize(){return(0,o.default)(Ember.get(this.args,"attachment.byteSize"),this.i18n)}_startScan(){this.scanCount=0
this.scanLog=[]
this.scanStatus=L
this._getScanStatus()}_getScanStatus(){if(!this.isDestroying){this.scanLog.push(`${Date.now()}:request`)
this.msgDataManager.getAttachmentScanStatus(this.attachmentId).then(e=>this._handleScanStatus(e.data.value)).catch(e=>{this._handleScanRequestFailed()
throw e})}}_handleScanStatus(e){if(!this.isDestroying){this.scanLog.push(`${Date.now()}:response:${e}`)
this.scanStatus=e
switch(e){case L:if(++this.scanCount>=5){this.scanStatus=I
this.jet.logError(new Error("Attachment scan timed out"),[`createdAt: ${Ember.get(this.args,"event.createdAt")}`,`id: ${this.attachmentId}`,`log: ${this.scanLog.join(",")}`])}else Ember.testing||Ember.run.later(this,this._getScanStatus,3e3)
return
case j:this.showDownload=!0
this._autoDownload()
return
case z:case I:return
default:this.scanStatus=I}}}_handleScanRequestFailed(){if(!this.isDestroying){this.scanStatus=I
this.jet.logError(new Error("Attachment scan request failed"),`id: ${this.attachmentId}`)}}_autoDownload(){if(!Ember.testing&&m.default){const e=document.createElement("a")
e.setAttribute("href",this.downloadUrl)
e.setAttribute("download",this.filename)
e.style.display="none"
document.body.appendChild(e)
e.click()
document.body.removeChild(e)
this._handleDownloaded()}}_handleDownloaded(){this.showDownload=!1
this.downloaded=!0}attemptToDownload(e){if(this.scanPassed)this._handleDownloaded()
else if(!this.scanInProgress){e.preventDefault()
this._startScan()}}dismissModal(){this.previewModalIsOpen=!1
this.tracking.fireInteractionEvent("close_photo_viewer")}},E=(0,i.default)(w.prototype,"jet",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.default)(w.prototype,"i18n",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,i.default)(w.prototype,"tracking",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,i.default)(w.prototype,"msgDataManager",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,i.default)(w.prototype,"scanCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=(0,i.default)(w.prototype,"scanStatus",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=(0,i.default)(w.prototype,"showDownload",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=(0,i.default)(w.prototype,"downloaded",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,i.default)(w.prototype,"previewModalIsOpen",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(w.prototype,"attemptToDownload",[v],Object.getOwnPropertyDescriptor(w.prototype,"attemptToDownload"),w.prototype),(0,i.default)(w.prototype,"dismissModal",[_],Object.getOwnPropertyDescriptor(w.prototype,"dismissModal"),w.prototype),w)
e.default=F
Ember._setComponentTemplate(C,F)})
define("msg-rich-media/components/attachment-drag-and-drop-error-display",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"7K/b5kY2",block:'{"symbols":["@errorType","@dismissError"],"statements":[[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-error-display pv2 ph4 display-flex"],[12],[2,"\\n  "],[10,"p"],[14,0,"msg-form__attachment-drag-and-drop-error-text flex-1 t-12 t-bold"],[12],[2,"\\n"],[6,[37,2],[[30,[36,1],[[32,1],"MULTIPLE_FILES"],null]],null,[["default","else"],[{"statements":[[2,"      "],[1,[30,[36,0],["i18n_error_multiple_files","msg-rich-media/components/attachment-drag-and-drop-error-display"],null]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"      "],[1,[30,[36,0],["i18n_error_invalid_file_type","msg-rich-media/components/attachment-drag-and-drop-error-display"],null]],[2,"\\n"]],"parameters":[]}]]],[2,"  "],[13],[2,"\\n\\n  "],[11,"button"],[24,0,"msg-form__attachment-drag-and-drop-error-dismiss-button"],[24,4,"button"],[4,[38,3],["click",[32,2]],null],[12],[2,"\\n    "],[1,[30,[36,4],null,[["type","a11y-text","size"],["cancel-icon",[30,[36,0],["i18n_dismiss_error","msg-rich-media/components/attachment-drag-and-drop-error-display"],null],"small"]]]],[2,"\\n  "],[13],[2,"\\n"],[13]],"hasEval":false,"upvars":["t","global-helpers@eq","if","on","artdeco-icons-web@li-icon"]}',meta:{moduleName:"msg-rich-media/components/attachment-drag-and-drop-error-display.hbs"}})
var a=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=a})
define("msg-rich-media/components/attachment-drag-and-drop",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","ember-lifeline","msg-shared/utils/attachments-handler"],function(e,t,a,i,n,s,r,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var o,m,d,c,p,u,g,h,b,f,y,v,_,w,E,D
const x=Ember.HTMLBars.template({id:"zs2SmyFD",block:'{"symbols":[],"statements":[[11,"div"],[16,0,[30,[36,1],["msg-form__attachment-drag-and-drop",[30,[36,0],[[32,0,["isDraggingOverWindow"]]," msg-form__attachment-drag-and-drop--over-window"],null],[30,[36,0],[[32,0,["isDraggingOverLayer"]]," msg-form__attachment-drag-and-drop--over-layer"],null],[30,[36,0],[[32,0,["showUserEducationLayer"]]," msg-form__attachment-drag-and-drop--user-education"],null]],null]],[4,[38,2],[[32,0,["setupWindowDragAndDropListeners"]]],null],[4,[38,3],["dragenter",[32,0,["onDragEnter"]]],null],[4,[38,3],["dragleave",[32,0,["onDragLeave"]]],null],[4,[38,3],["dragover",[32,0,["onDragOver"]]],null],[4,[38,3],["drop",[32,0,["onDrop"]]],null],[12],[2,"\\n  "],[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-content display-flex flex-column align-items-center justify-center"],[12],[2,"\\n    "],[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-state-illustration"],[12],[13],[2,"\\n    "],[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-text display-flex flex-column align-items-center justify-center"],[12],[2,"\\n      "],[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-state-text t-16 t-bold"],[12],[2,"\\n        "],[1,[30,[36,0],[[32,0,["isDraggingOverLayer"]],[30,[36,4],["i18n_drop_file","msg-rich-media/components/attachment-drag-and-drop"],null],[30,[36,4],["i18n_drag_file","msg-rich-media/components/attachment-drag-and-drop"],null]],null]],[2,"\\n      "],[13],[2,"\\n      "],[10,"div"],[14,0,"msg-form__attachment-drag-and-drop-discoverability-text text-align-center"],[12],[2,"\\n        "],[10,"div"],[14,0,"t-16 t-bold"],[12],[2,"\\n          "],[1,[30,[36,4],["i18n_select_file","msg-rich-media/components/attachment-drag-and-drop"],null]],[2,"\\n        "],[13],[2,"\\n        "],[10,"div"],[14,0,"t-14"],[12],[2,"\\n          "],[1,[30,[36,4],["i18n_or_drag_and_drop","msg-rich-media/components/attachment-drag-and-drop"],null]],[2,"\\n        "],[13],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n  "],[13],[2,"\\n"],[13]],"hasEval":false,"upvars":["if","concat","did-insert","on","t"]}',meta:{moduleName:"msg-rich-media/components/attachment-drag-and-drop.hbs"}}),k="MULTIPLE_FILES",S="INVALID_FILE_TYPE",T=/^image\/*/,P=["ai","psd","pdf","doc","docx","csv","zip","rar","ppt","pptx","pps","ppsx","odt","rtf","xls","xlsx","txt","pub","html","7z","eml"]
let M=(o=Ember.inject.service("jet"),m=Ember.inject.service("tracking"),d=Ember.inject.service("vector@vector-upload"),c=Ember._tracked,p=Ember._tracked,u=Ember._action,g=Ember._action,h=Ember._action,b=Ember._action,f=Ember._action,y=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"jet",v,this);(0,t.default)(this,"tracking",_,this);(0,t.default)(this,"vectorUpload",w,this);(0,t.default)(this,"isDraggingOverWindow",E,this);(0,t.default)(this,"isDraggingOverLayer",D,this)
this.windowDragCounter=0
this.layerDragCounter=0
this.attachmentsHandler=new l.default({vectorUpload:this.vectorUpload,tracking:this.tracking,jet:this.jet,updateUI:this.args.addAttachment,beforeUpload:this.args.beforeUpload,afterUpload:this.afterDropUpload.bind(this)})}willDestroy(){super.willDestroy.apply(this,arguments);(0,r.runDisposables)(this)}setupWindowDragAndDropListeners(){(0,r.addEventListener)(this,window,"dragenter",e=>{if(!this.isDestroying&&this._isFileDragAndDropEvent(e)){this.windowDragCounter+=1
if(1===this.windowDragCounter){Ember.set(this,"isDraggingOverWindow",!0)
this.tracking.firePageViewEvent(this.args.trackingKeys.PAGE_VIEW.DRAG)}}});(0,r.addEventListener)(this,window,"dragleave",e=>{if(!this.isDestroying&&this._isFileDragAndDropEvent(e)){e.preventDefault()
this.windowDragCounter-=1
0===this.windowDragCounter&&Ember.set(this,"isDraggingOverWindow",!1)}});(0,r.addEventListener)(this,window,"drop",e=>{if(!this.isDestroying&&this._isFileDragAndDropEvent(e)){this.windowDragCounter=0
Ember.setProperties(this,{isDraggingOverWindow:!1,showUserEducationLayer:!1})}})}onDragEnter(e){if(!this.isDestroying&&this._isFileDragAndDropEvent(e)){this.layerDragCounter+=1
if(1===this.layerDragCounter){this.isDraggingOverLayer=!0
this.tracking.firePageViewEvent(this.args.trackingKeys.PAGE_VIEW.DROP)}}}onDragLeave(e){if(!this.isDestroying&&this._isFileDragAndDropEvent(e)){e.preventDefault()
this.layerDragCounter-=1
0===this.layerDragCounter&&(this.isDraggingOverLayer=!1)}}onDrop(e){if(this.isDestroying&&!this._isFileDragAndDropEvent(e))return
e.preventDefault()
this.layerDragCounter=0
this.isDraggingOverLayer=!1
const{files:t}=e.dataTransfer
if(0===t.length)return
if(t.length>1){this.args.onError(k)
return}const a=t[0]
if(this._isAcceptedFileType(a)){this.tracking.fireInteractionEvent(this.args.trackingKeys.INTERACTION.DROPPED)
this.attachmentsHandler.uploadAttachment(a)}else this.args.onError(S)}onDragOver(e){e.preventDefault()}_isFileDragAndDropEvent(e){return-1!==Array.prototype.indexOf.call(e.dataTransfer.types,"Files")}_isAcceptedFileType(e){if(!e.type)return!1
if(T.test(e.type))return!0
const t=this._getFileExtension(e.name)
return-1!==P.indexOf(t)}_getFileExtension(e){return e.includes(".")?e.split(".").pop().toLowerCase():""}afterDropUpload(){this.tracking.fireInteractionEvent(this.args.trackingKeys.INTERACTION.UPLOADED)
this.args.afterUpload()}},v=(0,i.default)(y.prototype,"jet",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.default)(y.prototype,"tracking",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,i.default)(y.prototype,"vectorUpload",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.default)(y.prototype,"isDraggingOverWindow",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=(0,i.default)(y.prototype,"isDraggingOverLayer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(y.prototype,"setupWindowDragAndDropListeners",[u],Object.getOwnPropertyDescriptor(y.prototype,"setupWindowDragAndDropListeners"),y.prototype),(0,i.default)(y.prototype,"onDragEnter",[g],Object.getOwnPropertyDescriptor(y.prototype,"onDragEnter"),y.prototype),(0,i.default)(y.prototype,"onDragLeave",[h],Object.getOwnPropertyDescriptor(y.prototype,"onDragLeave"),y.prototype),(0,i.default)(y.prototype,"onDrop",[b],Object.getOwnPropertyDescriptor(y.prototype,"onDrop"),y.prototype),(0,i.default)(y.prototype,"onDragOver",[f],Object.getOwnPropertyDescriptor(y.prototype,"onDragOver"),y.prototype),y)
e.default=M
Ember._setComponentTemplate(x,M)})
define("msg-rich-media/components/audio-display",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","global-utils/utils/is-browser"],function(e,t,a,i,n,s,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var l,o,m,d,c,p
const u=Ember.HTMLBars.template({id:"QTNCEf2y",block:'{"symbols":[],"statements":[[11,"button"],[24,0,"msg-s-event-listitem__audio"],[16,5,[31,["width: calc(75px + ",[34,2]," * (100% - 75px));"]]],[24,4,"button"],[4,[38,3],["click",[32,0,["onClick"]]],null],[12],[2,"\\n  "],[10,"progress"],[14,0,"msg-s-event-listitem__audio-progress-bar"],[15,2,[32,0,["currentTime"]]],[15,"max",[32,0,["duration"]]],[12],[2,"\\n  "],[13],[2,"\\n\\n"],[10,"div"],[14,0,"msg-s-event-listitem__audio-icon-container relative"],[12],[2,"\\n"],[6,[37,4],[[32,0,["isPlaying"]]],null,[["default","else"],[{"statements":[[2,"    "],[1,[30,[36,1],null,[["class","type","size","a11y-text"],["mh2","pause-icon","small",[30,[36,0],["i18n_pause","msg-rich-media/components/audio-display"],null]]]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"    "],[1,[30,[36,1],null,[["class","type","size","a11y-text"],["mh2","play-icon","small",[30,[36,0],["i18n_play","msg-rich-media/components/audio-display"],null]]]]],[2,"\\n"]],"parameters":[]}]]],[13],[2,"\\n\\n  "],[10,"span"],[14,0,"msg-s-event-listitem__audio-time t-12 t-white t-normal"],[12],[2,"\\n    "],[1,[30,[36,5],[[32,0,["roundedRemainingTime"]]],[["customPrefixFormat"],[[32,0,["customPrefixFormat"]]]]]],[2,"\\n  "],[13],[2,"\\n"],[13]],"hasEval":false,"upvars":["t","artdeco-icons-web@li-icon","widthRatio","on","if","global-helpers@format-duration"]}',meta:{moduleName:"msg-rich-media/components/audio-display.hbs"}})
let g=(l=Ember.inject.service("tracking"),o=Ember._tracked,m=Ember._action,d=class extends s.default{get customPrefixFormat(){return{prefixInsignificants:!1,prefixSeconds:!0}}get duration(){return Ember.get(this.args,"mediaAttachment.audioMetadata.duration")/1e3}get roundedRemainingTime(){return Math.round(this.duration-this.currentTime)}get widthRatio(){return Math.max(0,Math.min(this.duration/60,1))}constructor(){super(...arguments);(0,t.default)(this,"tracking",c,this);(0,t.default)(this,"currentTime",p,this);(0,a.default)(this,"isPlaying",!1);(0,a.default)(this,"trackingPrefix","")
Ember.set(this,"audio",new Audio)
const e=document.createElement("source")
e.src=jSecure.sanitizeUrl(Ember.get(this.args,"mediaAttachment.audioMetadata.url"))
e.type="audio/mp4"
this.audio.appendChild(e)
this.audio.addEventListener("playing",this._handlePlaybackStarted.bind(this))
this.audio.addEventListener("ended",this._handlePlaybackEnded.bind(this))}onClick(){this.isPlaying?this._pauseAudio():this._playAudio()}_handlePlaybackStarted(){this.tracking.fireInteractionEvent(`${this.args.trackingPrefix||""}play_successful_voice_message`)
this._updateProgress()}_updateProgress(){Ember.testing?Ember.set(this,"currentTime",this.audio.currentTime):r.default&&window.requestAnimationFrame(()=>{if(this.isPlaying){Ember.set(this,"currentTime",this.audio.currentTime)
this._updateProgress()}})}_handlePlaybackEnded(){Ember.setProperties(this,{isPlaying:!1,currentTime:0})}_playAudio(){Ember.set(this,"isPlaying",!0)
this.audio.play()
this.tracking.fireInteractionEvent(`${this.args.trackingPrefix||""}play_voice_message`)}_pauseAudio(){Ember.set(this,"isPlaying",!1)
this.audio.pause()
this.tracking.fireInteractionEvent(`${this.args.trackingPrefix||""}pause_voice_message`)}},c=(0,i.default)(d.prototype,"tracking",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,i.default)(d.prototype,"currentTime",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,i.default)(d.prototype,"onClick",[m],Object.getOwnPropertyDescriptor(d.prototype,"onClick"),d.prototype),d)
e.default=g
Ember._setComponentTemplate(u,g)})
define("msg-rich-media/components/content-preview",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"Zz+ipaFY",block:'{"symbols":["&attrs","@feedUpdate","@showNestedShares","@deleteMessageEventModalState","@event","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@showSendReactionControls","@reactionsHoverTrackingName"],"statements":[[6,[37,0],[[32,11]],null,[["default","else"],[{"statements":[[2,"  "],[8,"msg-ui@primitives/event-listitem-actions",[],[["@classNames","@deleteMessageEventModalState","@enableMsgFwd","@event","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@shouldShowEditDelete","@showMessageEditForm","@showSendReactionControls","@reactionsHoverTrackingName"],["msg-s-event-listitem__message-bubble--msg-actions-enabled",[32,4],false,[32,5],[32,6],[32,7],[32,8],[32,9],[32,10],false,false,[32,11],[32,12]]],[["default"],[{"statements":[[2,"\\n    "],[10,"div"],[14,0,"msg-s-event-listitem__content-preview-container"],[12],[2,"\\n      "],[11,"div"],[24,0,"msg-content-preview artdeco-card"],[17,1],[12],[2,"\\n        "],[8,"ember-engines@link-to-external",[],[["@route","@model","@class"],["feed.update",[32,2,["updateMetadata","urn"]],"msg-content-preview__link feed-container-theme"]],[["default"],[{"statements":[[2,"\\n          "],[8,"feed-shared@render-models/mini-update-v2",[],[["@showFollowButton","@update","@showNestedShares"],[false,[32,2],[32,3]]],null],[2,"\\n        "]],"parameters":[]}]]],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n  "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"  "],[10,"div"],[14,0,"msg-s-event-listitem__content-preview-container"],[12],[2,"\\n    "],[11,"div"],[24,0,"msg-content-preview artdeco-card"],[17,1],[12],[2,"\\n      "],[8,"ember-engines@link-to-external",[],[["@route","@model","@class"],["feed.update",[32,2,["updateMetadata","urn"]],"msg-content-preview__link feed-container-theme"]],[["default"],[{"statements":[[2,"\\n        "],[8,"feed-shared@render-models/mini-update-v2",[],[["@showFollowButton","@update","@showNestedShares"],[false,[32,2],[32,3]]],null],[2,"\\n      "]],"parameters":[]}]]],[2,"\\n    "],[13],[2,"\\n  "],[13],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["if"]}',meta:{moduleName:"msg-rich-media/components/content-preview.hbs"}})
var a=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=a})
define("msg-rich-media/components/messaging-story",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","image-view-model/utils/artdeco-icon"],function(e,t,a,i,n,s,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var l,o,m,d,c,p,u,g,h,b,f,y,v,_
const w=Ember.HTMLBars.template({id:"cLlXZBrk",block:'{"symbols":["@trackingPrefix","@event","@deleteMessageEventModalState","@enableMsgFwd","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@shouldShowEditDelete","@showMessageEditForm","@showSendReactionControls","@reactionsHoverTrackingName"],"statements":[[6,[37,0],[[32,12]],null,[["default","else"],[{"statements":[[2,"  "],[8,"msg-ui@primitives/event-listitem-actions",[],[["@classNames","@deleteMessageEventModalState","@enableMsgFwd","@event","@isMercado","@isOverlay","@onEmojiHoverableHide","@onEmojiHoverableShow","@onEmojiPickerVisibilityChange","@setMessageFocus","@shouldShowEditDelete","@showMessageEditForm","@showSendReactionControls","@reactionsHoverTrackingName"],["msg-s-event-listitem__message-bubble--msg-actions-enabled",[32,3],[32,4],[32,2],[32,5],[32,6],[32,7],[32,8],[32,9],[30,[36,5],[[32,0],"messageFocused"],null],[32,10],[32,11],[32,12],[32,13]]],[["default"],[{"statements":[[2,"\\n    "],[10,"div"],[14,0,"msg-story-item"],[12],[2,"\\n"],[6,[37,0],[[32,2,["eventContent","contentCaption"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[14,0,"t-14 t-black--light pl2 pb2"],[12],[1,[30,[36,4],[[32,2,["eventContent","contentCaption"]]],null]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"      "],[10,"div"],[14,0,"pl2 display-flex"],[12],[2,"\\n"],[6,[37,0],[[32,0,["showThumbnailContainer"]]],null,[["default"],[{"statements":[[2,"          "],[10,"div"],[14,"role","link"],[14,"tabindex","0"],[15,"aria-label",[30,[36,0],[[32,0,["messagingStory","url"]],[30,[36,3],["a11y_click_to_view_story","msg-rich-media/components/messaging-story"],null],[30,[36,3],["a11y_cant_view_expired_story","msg-rich-media/components/messaging-story"],null]],null]],[15,0,[30,[36,0],[[32,0,["showExpiredState"]],"msg-story-item__thumbnail--expired","msg-story-item__thumbnail"],null]],[12],[2,"\\n"],[6,[37,0],[[32,0,["messagingStoryLoading"]]],null,[["default","else"],[{"statements":[[2,"                "],[8,"artdeco-loader@artdeco-loader",[],[["@size"],["small"]],null],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["messagingStoryFailedToLoad"]]],null,[["default","else"],[{"statements":[[2,"                "],[8,"artdeco-button@artdeco-button",[[16,"data-control-name",[30,[36,1],[[32,1],"reload_story_thumbnail"],null]],[16,"aria-label",[30,[36,3],["a11y_retry_loading_story","msg-rich-media/components/messaging-story"],null]]],[["@type","@icon","@circle","@size","@color","@click"],["tertiary","refresh-icon",true,2,"muted",[32,0,["fetchMessagingStory"]]]],null],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["showExpiredState"]]],null,[["default","else"],[{"statements":[[2,"                "],[10,"div"],[14,0,"msg-story-item__expired-thumbnail-icon-container"],[12],[2,"\\n                  "],[1,[30,[36,2],null,[["class","type","size"],["msg-story-item__expired-thumbnail-icon",[32,0,["expiredThumbnailIcon","name"]],"medium"]]]],[2,"\\n                "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["messagingStory","url"]]],null,[["default"],[{"statements":[[2,"                "],[8,"app-aware-link@app-aware-link",[[24,0,"msg-story-item__link"],[16,"data-control-name",[30,[36,1],[[32,1],"expand_story_thumbnail"],null]],[24,"tabindex","-1"]],[["@href"],[[32,0,["messagingStory","url"]]]],null],[2,"\\n                "]],"parameters":[]}]]]],"parameters":[]}]]],[6,[37,0],[[32,0,["messagingStory","thumbnail"]]],null,[["default"],[{"statements":[[2,"                "],[8,"ember-vector-images@custom-image",[],[["@class","@ghostType","@image","@desiredWidth"],["msg-story-item__thumbnail-image","image",[32,0,["messagingStory","thumbnail"]],72]],null],[2,"\\n"]],"parameters":[]}]]],[2,"            "]],"parameters":[]}]]]],"parameters":[]}]]],[2,"          "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"\\n"],[6,[37,0],[[32,0,["showExpiredState"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[15,0,[30,[36,1],["t-12 t-black--light display-flex justify-center",[30,[36,0],[[32,0,["showThumbnailContainer"]]," flex-column"],null]],null]],[12],[2,"\\n          "],[1,[30,[36,2],null,[["a11y-text","class","type","size"],[[32,0,["messagingStory","expiredText","text"]],"mr1 mb2 align-self-flex-start",[32,0,["expiredTextIcon","name"]],"small"]]]],[2,"\\n          "],[1,[32,0,["messagingStory","expiredText","text"]]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"      "],[13],[2,"\\n    "],[13],[2,"\\n  "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"  "],[10,"div"],[14,0,"msg-story-item"],[12],[2,"\\n"],[6,[37,0],[[32,2,["eventContent","contentCaption"]]],null,[["default"],[{"statements":[[2,"      "],[10,"div"],[14,0,"t-14 t-black--light pl2 pb2"],[12],[1,[30,[36,4],[[32,2,["eventContent","contentCaption"]]],null]],[13],[2,"\\n"]],"parameters":[]}]]],[2,"    "],[10,"div"],[14,0,"pl2 display-flex"],[12],[2,"\\n"],[6,[37,0],[[32,0,["showThumbnailContainer"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[14,"role","link"],[14,"tabindex","0"],[15,"aria-label",[30,[36,0],[[32,0,["messagingStory","url"]],[30,[36,3],["a11y_click_to_view_story","msg-rich-media/components/messaging-story"],null],[30,[36,3],["a11y_cant_view_expired_story","msg-rich-media/components/messaging-story"],null]],null]],[15,0,[30,[36,0],[[32,0,["showExpiredState"]],"msg-story-item__thumbnail--expired","msg-story-item__thumbnail"],null]],[12],[2,"\\n"],[6,[37,0],[[32,0,["messagingStoryLoading"]]],null,[["default","else"],[{"statements":[[2,"            "],[8,"artdeco-loader@artdeco-loader",[],[["@size"],["small"]],null],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["messagingStoryFailedToLoad"]]],null,[["default","else"],[{"statements":[[2,"            "],[8,"artdeco-button@artdeco-button",[[16,"data-control-name",[30,[36,1],[[32,1],"reload_story_thumbnail"],null]],[16,"aria-label",[30,[36,3],["a11y_retry_loading_story","msg-rich-media/components/messaging-story"],null]]],[["@type","@icon","@circle","@size","@color","@click"],["tertiary","refresh-icon",true,2,"muted",[32,0,["fetchMessagingStory"]]]],null],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["showExpiredState"]]],null,[["default","else"],[{"statements":[[2,"              "],[10,"div"],[14,0,"msg-story-item__expired-thumbnail-icon-container"],[12],[2,"\\n                "],[1,[30,[36,2],null,[["class","type","size"],["msg-story-item__expired-thumbnail-icon",[32,0,["expiredThumbnailIcon","name"]],"medium"]]]],[2,"\\n              "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,0],[[32,0,["messagingStory","url"]]],null,[["default"],[{"statements":[[2,"              "],[8,"app-aware-link@app-aware-link",[[24,0,"msg-story-item__link"],[16,"data-control-name",[30,[36,1],[[32,1],"expand_story_thumbnail"],null]],[24,"tabindex","-1"]],[["@href"],[[32,0,["messagingStory","url"]]]],null],[2,"\\n            "]],"parameters":[]}]]]],"parameters":[]}]]],[6,[37,0],[[32,0,["messagingStory","thumbnail"]]],null,[["default"],[{"statements":[[2,"              "],[8,"ember-vector-images@custom-image",[],[["@class","@ghostType","@image","@desiredWidth"],["msg-story-item__thumbnail-image","image",[32,0,["messagingStory","thumbnail"]],72]],null],[2,"\\n"]],"parameters":[]}]]],[2,"          "]],"parameters":[]}]]]],"parameters":[]}]]],[2,"        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"\\n"],[6,[37,0],[[32,0,["showExpiredState"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[15,0,[30,[36,1],["t-12 t-black--light display-flex justify-center",[30,[36,0],[[32,0,["showThumbnailContainer"]]," flex-column"],null]],null]],[12],[2,"\\n          "],[1,[30,[36,2],null,[["a11y-text","class","type","size"],[[32,0,["messagingStory","expiredText","text"]],"mr1 mb2 align-self-flex-start",[32,0,["expiredTextIcon","name"]],"small"]]]],[2,"\\n          "],[1,[32,0,["messagingStory","expiredText","text"]]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"    "],[13],[2,"\\n  "],[13],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["if","concat","artdeco-icons-web@li-icon","t","text-view-model@text-view-model","ember-set-helper@set"]}',meta:{moduleName:"msg-rich-media/components/messaging-story.hbs"}})
let E=(l=Ember.inject.service("msg-data@data-manager"),o=Ember._tracked,m=Ember._tracked,d=Ember._tracked,c=Ember._tracked,p=Ember._tracked,u=Ember._action,g=class extends s.default{get showThumbnailContainer(){return Ember.get(this,"messagingStory.thumbnail")||this.messagingStoryLoading||this.messagingStoryFailedToLoad}get showExpiredState(){return this.messagingStory&&!Ember.get(this,"messagingStory.url")&&!this.messagingStoryFailedToLoad&&!this.messagingStoryLoading}constructor(){super(...arguments);(0,t.default)(this,"msgDataManager",h,this);(0,t.default)(this,"messagingStory",b,this);(0,t.default)(this,"messagingStoryLoading",f,this);(0,t.default)(this,"messagingStoryFailedToLoad",y,this);(0,t.default)(this,"expiredTextIcon",v,this);(0,t.default)(this,"expiredThumbnailIcon",_,this)
Ember.get(this.args,"event.eventContent.storyItemUrn")&&this.fetchMessagingStory()}fetchMessagingStory(){this.messagingStoryLoading=!0
this.msgDataManager.fetchMessagingStory(this.args.event).then(e=>{if(!this.isDestroying){this.expiredThumbnailIcon=(0,r.getLIIcon)(Ember.get(e,"expiredThumbnailIcon"))
this.expiredTextIcon=(0,r.getLIIcon)(Ember.get(e,"expiredTextIcon"))
this.messagingStoryFailedToLoad=!1
this.messagingStoryLoading=!1
this.messagingStory=e}}).catch(e=>{if(!this.isDestroying){this.messagingStoryLoading=!1
this.messagingStoryFailedToLoad=!0
throw e}})}},h=(0,i.default)(g.prototype,"msgDataManager",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,i.default)(g.prototype,"messagingStory",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,i.default)(g.prototype,"messagingStoryLoading",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,i.default)(g.prototype,"messagingStoryFailedToLoad",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,i.default)(g.prototype,"expiredTextIcon",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.default)(g.prototype,"expiredThumbnailIcon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(g.prototype,"fetchMessagingStory",[u],Object.getOwnPropertyDescriptor(g.prototype,"fetchMessagingStory"),g.prototype),g)
e.default=E
Ember._setComponentTemplate(w,E)})
define("msg-rich-media/components/upload-attachment-previews",["exports","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@glimmer/component","ember-batcher"],function(e,t,a,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n,s
const r=Ember.HTMLBars.template({id:"nonh8k09",block:'{"symbols":["attachment","@hideAttachmentInfo","@removeAttachment","@attachments"],"statements":[[11,"div"],[24,0,"msg-form__attachment-previews overflow-auto scrollable"],[4,[38,8],[[30,[36,7],[[32,0],"scrollingContainer"],null]],null],[4,[38,9],[[32,0,["scrollToBottom"]],[32,4]],null],[12],[2,"\\n"],[6,[37,11],[[30,[36,10],[[30,[36,10],[[32,4]],null]],null]],null,[["default"],[{"statements":[[2,"    "],[10,"figure"],[15,0,[31,["msg-form__attachment-preview msg-attachment-preview pv2 pl3 pr4\\n\\n        ",[30,[36,5],[[32,1,["isError"]],"msg-attachment-preview--error",[30,[36,5],[[32,1,["isUploading"]],"msg-attachment-preview--uploading"],null]],null]]]],[12],[2,"\\n"],[6,[37,5],[[32,1,["isError"]]],null,[["default","else"],[{"statements":[[2,"        "],[1,[30,[36,4],null,[["class","type","size"],["msg-attachment-preview__thumbnail EntityPhoto-square-2","error-pebble-icon","medium"]]]],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,5],[[32,1,["isImage"]]],null,[["default","else"],[{"statements":[[2,"        "],[10,"div"],[14,0,"msg-attachment-preview__image-container"],[12],[2,"\\n          "],[8,"ember-vector-images@custom-image",[],[["@image","@class","@alt","@desiredWidth"],[[32,1,["reference"]],"msg-attachment-preview__image EntityPhoto-square-2",[30,[36,3],["a11y_preview_image","msg-rich-media/components/upload-attachment-previews"],[["attachmentName"],[[32,1,["name"]]]]],40]],null],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"        "],[10,"div"],[15,0,[31,["t-12 t-white t-bold msg-attachment-preview__attachment-type msg-attachment-preview__attachment-type--",[32,1,["mediaTypeExtension"]]]]],[12],[2,"\\n          "],[1,[30,[36,5],[[32,1,["isGeneric"]],[30,[36,4],null,[["class","type"],["msg-attachment-preview__attachment-type-icon","document-icon"]]],[32,1,["mediaTypeExtension"]]],null]],[2,"\\n        "],[13],[2,"\\n      "]],"parameters":[]}]]]],"parameters":[]}]]],[2,"\\n      "],[10,"figcaption"],[14,0,"flex-1 overflow-hidden ph2"],[12],[2,"\\n"],[6,[37,6],[[32,2]],null,[["default"],[{"statements":[[2,"          "],[10,"div"],[14,0,"display-flex t-12 t-black--light t-normal"],[12],[2,"\\n            "],[10,"h3"],[14,0,"msg-attachment-preview__attachment-name t-12 t-black--light t-bold truncate"],[12],[2,"\\n              "],[1,[32,1,["name"]]],[2,"\\n            "],[13],[2,"\\n            "],[10,"span"],[14,0,"msg-attachment-preview__bytesize flex-shrink-zero"],[12],[2,"\\n              "],[1,[32,1,["formattedSize"]]],[2,"\\n            "],[13],[2,"\\n          "],[13],[2,"\\n"]],"parameters":[]}]]],[6,[37,5],[[32,1,["isUploading"]]],null,[["default","else"],[{"statements":[[2,"          "],[10,"p"],[14,0,"msg-attachment-preview__status msg-attachment-preview__status--uploading t-12 t-black t-bold"],[12],[2,"\\n            "],[1,[30,[36,3],["attachment_status_uploading","msg-rich-media/components/upload-attachment-previews"],null]],[2,"\\n          "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,5],[[32,1,["isError"]]],null,[["default","else"],[{"statements":[[2,"          "],[10,"p"],[14,0,"msg-attachment-preview__status msg-attachment-preview__status--error t-12 t-black t-bold"],[12],[2,"\\n"],[6,[37,5],[[32,1,["customError"]]],null,[["default","else"],[{"statements":[[2,"              "],[1,[32,1,["customError"]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"              "],[1,[30,[36,5],[[32,1,["isTypeError"]],[30,[36,3],["attachment_unsupported_type","msg-rich-media/components/upload-attachment-previews"],null],[30,[36,5],[[32,1,["isSizeError"]],[30,[36,3],["attachment_unsupported_size","msg-rich-media/components/upload-attachment-previews"],null],[30,[36,3],["attachment_status_error","msg-rich-media/components/upload-attachment-previews"],null]],null]],null]],[2,"\\n"]],"parameters":[]}]]],[2,"          "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"          "],[10,"p"],[14,0,"msg-attachment-preview__status t-12 t-black--light t-normal"],[12],[2,"\\n            "],[1,[30,[36,3],["attachment_status_attached","msg-rich-media/components/upload-attachment-previews"],null]],[2,"\\n          "],[13],[2,"\\n        "]],"parameters":[]}]]]],"parameters":[]}]]],[6,[37,5],[[32,1,["isUploading"]]],null,[["default"],[{"statements":[[2,"          "],[10,"progress"],[14,0,"msg-attachment-preview__upload-progress mt1"],[14,"max","100"],[15,2,[32,1,["progress"]]],[12],[13],[2,"\\n"]],"parameters":[]}]]],[2,"      "],[13],[2,"\\n\\n"],[6,[37,5],[[32,1,["isRetryable"]]],null,[["default"],[{"statements":[[2,"        "],[11,"button"],[24,0,"retry-attachment"],[24,4,"button"],[4,[38,1],["click",[30,[36,0],[[32,1,["retryAttachment"]],[32,1]],null]],null],[4,[38,2],["send_retry"],null],[12],[2,"\\n          "],[1,[30,[36,4],null,[["type","ally-text","size"],["refresh-icon",[30,[36,3],["attachment_retry","msg-rich-media/components/upload-attachment-previews"],null],"small"]]]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"\\n      "],[11,"button"],[24,0,"remove-attachment"],[24,4,"button"],[4,[38,1],["click",[30,[36,0],[[32,3],[32,1]],null]],null],[4,[38,2],["cancel_selected_photo"],null],[12],[2,"\\n        "],[1,[30,[36,4],null,[["type","a11y-text","size"],["cancel-icon",[30,[36,3],["a11y_attachment_remove","msg-rich-media/components/upload-attachment-previews"],[["attachmentName"],[[32,1,["name"]]]]],"small"]]]],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[1]}]]],[13]],"hasEval":false,"upvars":["fn","on","ember-cli-pemberly-tracking@track-interaction","t","artdeco-icons-web@li-icon","if","unless","ember-set-helper@set","did-insert","did-update","-track-array","each"]}',meta:{moduleName:"msg-rich-media/components/upload-attachment-previews.hbs"}})
let l=(n=Ember._action,s=class extends a.default{scrollToBottom(){(0,i.mutateDOM)(()=>{this.isDestroying||(this.scrollingContainer.scrollTop=this.scrollingContainer.scrollHeight)})}},(0,t.default)(s.prototype,"scrollToBottom",[n],Object.getOwnPropertyDescriptor(s.prototype,"scrollToBottom"),s.prototype),s)
e.default=l
Ember._setComponentTemplate(r,l)})
define("msg-rich-media/components/video-display",["exports","@glimmer/component"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a=Ember.HTMLBars.template({id:"IrViOnFD",block:'{"symbols":["videoRouter","@iconSize","@onPlayerReady"],"statements":[[10,"div"],[14,0,"msg-s-event-listitem__video"],[12],[2,"\\n  "],[10,"div"],[14,0,"msg-s-event-listitem__video-aspect-ratio-container"],[12],[2,"\\n    "],[8,"video@native-video-router",[],[["@pillarSource"],["messaging"]],[["default"],[{"statements":[[2,"\\n      "],[8,[32,1,["NativeVideoLoader"]],[],[["@videoPlayMetadata","@iconSize","@onPlayerReady"],[[32,0,["videoPlayMetadata"]],[32,2],[32,3]]],null],[2,"\\n    "]],"parameters":[1]}]]],[2,"\\n  "],[13],[2,"\\n"],[13],[2,"\\n\\n"]],"hasEval":false,"upvars":[]}',meta:{moduleName:"msg-rich-media/components/video-display.hbs"}})
class i extends t.default{constructor(){super(...arguments)
this.videoPlayMetadata=JSON.parse(JSON.stringify(Ember.get(this.args,"mediaAttachment.videoPlayMetadata")))
this.videoPlayMetadata.progressiveStreams[0].mediaType="video/mp4"}}e.default=i
Ember._setComponentTemplate(a,i)})
define("msg-rich-media/config/environment",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-rich-media/config/environment",a=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(a))}catch(i){t={}}var a=t
e.default=a})
define.alias("ember-cli-pemberly-i18n/helpers/bidi-dir","msg-rich-media/helpers/bidi-dir")
define.alias("ember-cli-pemberly-i18n/helpers/format-currency","msg-rich-media/helpers/format-currency")
define.alias("ember-cli-pemberly-i18n/helpers/format-date","msg-rich-media/helpers/format-date")
define.alias("ember-cli-pemberly-i18n/helpers/format-name","msg-rich-media/helpers/format-name")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-rich-media/helpers/format-number")
define.alias("ember-cli-pemberly-i18n/helpers/format-time","msg-rich-media/helpers/format-time")
define.alias("ember-cli-pemberly-i18n/helpers/format-truncate","msg-rich-media/helpers/format-truncate")
define.alias("ember-cli-pemberly-i18n/helpers/is-any-locale","msg-rich-media/helpers/is-any-locale")
define.alias("ember-cli-pemberly-i18n/helpers/is-cjk-language","msg-rich-media/helpers/is-cjk-language")
define.alias("ember-cli-pemberly-i18n/helpers/is-rtl-content","msg-rich-media/helpers/is-rtl-content")
define.alias("ember-cli-pemberly-i18n/helpers/is-rtl-language","msg-rich-media/helpers/is-rtl-language")
define.alias("ember-set-helper/helpers/set","msg-rich-media/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t-link-to","msg-rich-media/helpers/t-link-to")
define.alias("ember-cli-pemberly-i18n/helpers/t-make-name","msg-rich-media/helpers/t-make-name")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-rich-media/helpers/t")
define.alias("ember-cli-pemberly-i18n/initializers/i18n","msg-rich-media/initializers/i18n")
define("msg-rich-media/instance-initializers/-t-link-to",["exports","ember-stdlib/utils/is-browser"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.initialize=a
e.default=void 0
function a(e){t.default&&e.lookup("service:-t-link-to")}var i={name:"-t-link-to",initialize:a}
e.default=i})
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-rich-media/modifiers/did-insert")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-rich-media/modifiers/did-update")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-rich-media/modifiers/will-destroy")
define.alias("ember-cli-pemberly-i18n/services/-t-link-to","msg-rich-media/services/-t-link-to")
define.alias("ember-cli-pemberly-i18n/services/formatter","msg-rich-media/services/formatter")
define.alias("ember-cli-pemberly-i18n/services/i18n","msg-rich-media/services/i18n")
define.alias("ember-cli-pemberly-i18n/services/locale","msg-rich-media/services/locale")

//# sourceMappingURL=engine.map